<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ミニブログ</title>
  <style>
    /* モーダルの基本デザイン */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
    }
    .modal button {
      margin: 5px;
    }
  </style>
</head>
<body>
  <h1>記事一覧</h1>
  <a href="/new">新規投稿</a>
  <ul>
    <% @posts.each do |post| %>
      <li>
        <h2><%= post['title'] %></h2>
        <p><%= post['content'] %></p>
        <button onclick="openModal(<%= post['id'] %>)">削除</button>
      </li>
    <% end %>
  </ul>

  <!-- モーダル -->
  <div id="deleteModal" class="modal">
    <div class="modal-content">
      <p>本当に削除しますか？</p>
      <form id="deleteForm" method="post">
        <button type="submit">はい、削除する</button>
        <button type="button" onclick="closeModal()">キャンセル</button>
      </form>
    </div>
  </div>

  <script>
    const modal = document.getElementById("deleteModal");
    const form = document.getElementById("deleteForm");

    function openModal(id) {
      form.action = "/delete/" + id;  // 投稿IDをセット
      modal.style.display = "flex";
    }

    function closeModal() {
      modal.style.display = "none";
    }
  </script>
</body>
</html>
